{"NM":"Drag api 的基础使用","CTS":[{"NT":"h","CT":"HTML5 Drag api 的基础使用","CL":"#333"},{"NT":"p","CT":"注：本文部分文本来自 MDN 相关条文。","CL":"#D50000"},{"NT":"floor","CTS":[{"NT":"h","CT":"前置条件","CL":"#333"},{"NT":"p","CT":"需要被拖拽的元素添加``dragable=true``，例如：","CL":"#333"},{"NT":"code","LG":"xml","CT":"&lt;div dragable=true&gt;&lt;/div&gt;"}]},{"NT":"floor","CTS":[{"NT":"h","CT":"拖拽事件分类","CL":"#333"},{"NT":"floor","CTS":[{"NT":"h","CT":"对于被拖拽元素","CL":"#333"},{"NT":"floor","CTS":[{"NT":"h","CT":"drag 事件``ondrag``","CL":"#333"},{"NT":"p","CT":"当拖拽元素或选中的文本时触发。\n拖拽元素移动时持续触发。 ","CL":"#333"}]},{"NT":"floor","CTS":[{"NT":"h","CT":"dragstart 事件``ondragstart``","CL":"#333"},{"NT":"p","CT":"当用户开始拖拽一个元素或选中的文本时触发。","CL":"#333"}]},{"NT":"floor","CTS":[{"NT":"h","CT":"dragend 事件``ondragend``","CL":"#333"},{"NT":"p","CT":"当拖拽操作结束时触发 (比如松开鼠标按键或敲“Esc”键时)。","CL":"#333"}]}]},{"NT":"floor","CTS":[{"NT":"h","CT":"对于可释放目标元素","CL":"#333"},{"NT":"floor","CTS":[{"NT":"h","CT":"dragenter 事件``ondragenter``","CL":"#333"},{"NT":"p","CT":"当拖拽元素或选中的文本到一个可释放目标时触发。","CL":"#333"}]},{"NT":"floor","CTS":[{"NT":"h","CT":"dragover 事件``ondragover``","CL":"#333"},{"NT":"p","CT":"当元素或选中的文本被拖到一个可释放目标上时持续触发（每 100 毫秒触发一次）。","CL":"#333"}]},{"NT":"floor","CTS":[{"NT":"h","CT":"dragleave 事件``ondragleave``","CL":"#333"},{"NT":"p","CT":"当拖拽元素或选中的文本离开一个可释放目标时触发。","CL":"#333"}]},{"NT":"floor","CTS":[{"NT":"h","CT":"drop 事件``ondrop``","CL":"#333"},{"NT":"p","CT":"当元素或选中的文本在可释放目标上被释放时触发。\n注：当被元素在可释放目标上被释放时，此事件将先于``dragend ``事件触发。","CL":"#333"}]}]}]},{"NT":"floor","CTS":[{"NT":"h","CT":"基础实现","CL":"#333"},{"NT":"floor","CTS":[{"NT":"h","CT":"HTML","CL":"#333"},{"NT":"code","LG":"xml","CT":"&lt;html&gt;\n&lt;body&gt;\n    &lt;div id=\"draged\" draggable=\"true\"&gt;&lt;/div&gt;\n    &lt;div id=\"target\"&gt;&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;"}]},{"NT":"floor","CTS":[{"NT":"h","CT":"基础样式","CL":"#333"},{"NT":"code","LG":"css","CT":"body {\n    margin: 0;\n}\n\n#draged {\n    width: 100px;\n    height: 100px;\n    background-color: #333;\n    cursor: pointer;\n    box-sizing: border-box;\n    transition: .2s;\n}\n\n#target {\n    position: absolute;\n    top: 0; right: 0;\n    width: 50vw;\n    height: 100vh;\n    background-color: #999;\n    border: solid 4px transparent;\n    box-sizing: border-box;\n    transition: .2s;\n}"}]},{"NT":"floor","CTS":[{"NT":"h","CT":"添加被拖拽元素的 JS 和样式","CL":"#333"},{"NT":"code","LG":"javascript","CT":"const draggableEl = document.querySelector(\"#draged\")\nconst targetEl    = document.querySelector(\"#target\")\nlet   draggingEl   = null\n\ndraggableEl.ondragstart = function() {\n    draggingEl = this\n    this.classList.add(\"dragging\")\n    targetEl.classList.add(\"dragging\")\n}\ndraggableEl.ondragend   = function() {\n    draggingEl = null\n    this.classList.remove(\"dragging\")\n    targetEl.classList.remove(\"dragging\")\n}"},{"NT":"code","LG":"css","CT":"#draged.dragging {\n    opacity: .75;\n}\n#target.droppable {\n    background-color: #666;\n}\n"}]},{"NT":"floor","CTS":[{"NT":"h","CT":"添加可释放元素的 JS 和样式","CL":"#333"},{"NT":"code","LG":"javascript","CT":"// 被拖拽元素进出可释放元素时\n// 添加或取出 CSS 类\ntargetEl.ondragenter = function() {\n    this.classList.add(\"droppable\")\n}\ntargetEl.ondragleave = function() {\n    this.classList.remove(\"droppable\")\n}\n// 为了正常触发 drop 事件\ntargetEl.ondragover  = function(e) {\n    e.preventDefault()\n}\n\ntargetEl.ondrop      = function() {\n    console.log(draggingEl)\n}\n"}]}]}]}