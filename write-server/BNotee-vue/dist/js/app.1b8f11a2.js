(function(e){function t(t){for(var n,s,l=t[0],r=t[1],a=t[2],u=0,b=[];u<l.length;u++)s=l[u],Object.prototype.hasOwnProperty.call(c,s)&&c[s]&&b.push(c[s][0]),c[s]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);d&&d(t);while(b.length)b.shift()();return i.push.apply(i,a||[]),o()}function o(){for(var e,t=0;t<i.length;t++){for(var o=i[t],n=!0,l=1;l<o.length;l++){var r=o[l];0!==c[r]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=o[0]))}return e}var n={},c={app:0},i=[];function s(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=n,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(o,n,function(t){return e[t]}.bind(null,n));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=t,l=l.slice();for(var a=0;a<l.length;a++)t(l[a]);var d=r;i.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"0d55":function(e,t,o){"use strict";o("6d2d")},"15cf":function(e,t,o){"use strict";o("cee2")},2683:function(e,t,o){},3883:function(e,t,o){},"38b9":function(e,t,o){},"39de":function(e,t,o){},"3e29":function(e,t,o){"use strict";o("8c71")},"475b":function(e,t,o){},"4a16":function(e,t,o){"use strict";o("da3e")},"4b7b":function(e,t,o){"use strict";o("6377")},"4e33":function(e,t,o){},"4e36":function(e,t,o){},5143:function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("7a23");function c(e,t,o,c,i,s){var l=Object(n["u"])("tool-bar"),r=Object(n["u"])("uploader"),a=Object(n["u"])("control-balls"),d=Object(n["u"])("msgbar"),u=Object(n["u"])("note"),b=Object(n["u"])("fixed-components"),f=Object(n["u"])("anchors");return Object(n["o"])(),Object(n["f"])(n["a"],null,[Object(n["g"])("div",{class:Object(n["m"])(["dark-filter",{darken:i.isDarkMode}])},null,2),Object(n["j"])(l,{isTouchMode:i.isTouchMode},null,8,["isTouchMode"]),Object(n["j"])(r),Object(n["j"])(a,{isDarkMode:i.isDarkMode,isTouchMode:i.isTouchMode,isFullscreen:i.isFullscreen,onToggleDarkMode:t[0]||(t[0]=function(e){return i.isDarkMode=!i.isDarkMode}),onToggleTouchMode:t[1]||(t[1]=function(e){return i.isTouchMode=!i.isTouchMode}),onToggleFullscreen:t[2]||(t[2]=function(e){return i.isFullscreen=!i.isFullscreen})},null,8,["isDarkMode","isTouchMode","isFullscreen"]),Object(n["j"])(d),Object(n["j"])(u,{isFullscreen:i.isFullscreen,isTouchMode:i.isTouchMode},null,8,["isFullscreen","isTouchMode"]),Object(n["j"])(b),Object(n["j"])(f)],64)}o("caad");var i=function(e){return Object(n["q"])("data-v-e843bde4"),e=e(),Object(n["p"])(),e},s={class:"toolbar shadow-3"},l={class:"logo shadow-2"},r=i((function(){return Object(n["g"])("i",{class:"material-icons"},"info_outline",-1)})),a=[r],d=i((function(){return Object(n["g"])("i",{class:"material-icons"},"format_list_bulleted",-1)})),u=[d],b={class:"tools"},f=i((function(){return Object(n["g"])("i",{class:"material-icons"},"add",-1)})),h=[f],p=i((function(){return Object(n["g"])("i",{class:"material-icons"},"remove",-1)})),j=[p],O=i((function(){return Object(n["g"])("i",{class:"material-icons"},"indeterminate_check_box",-1)})),v=[O],g=i((function(){return Object(n["g"])("i",{class:"material-icons"},"color_lens",-1)})),m=[g],T=i((function(){return Object(n["g"])("i",{class:"material-icons"},"clear_all",-1)})),y=[T],C=i((function(){return Object(n["g"])("i",{class:"material-icons"},"cloud_upload",-1)})),w=[C],N=i((function(){return Object(n["g"])("i",{class:"material-icons"},"vertical_align_bottom",-1)})),k=[N],x={class:"material-icons file"},L=Object(n["i"])("input "),M={ref:"fileUploader",type:"file",accept:"application/json"};function S(e,t,o,c,i,r){var d=Object(n["u"])("info");return Object(n["o"])(),Object(n["f"])("div",s,[Object(n["j"])(d,{disabled:!i.isInfoWindowShow},null,8,["disabled"]),Object(n["g"])("div",l,[Object(n["g"])("div",{class:Object(n["m"])(["info-outer",{disabled:!i.isInfoIconShow}]),onClick:t[0]||(t[0]=function(e){return i.isInfoWindowShow=!0})},a,2),Object(n["g"])("div",{class:"logo-outer",onClick:t[1]||(t[1]=function(){return r.logoClick&&r.logoClick.apply(r,arguments)})},u)]),Object(n["g"])("div",b,[Object(n["g"])("div",{class:Object(n["m"])(["tool btn btn-shallow",{disabled:!r.selectedNode.loc}]),onClick:t[2]||(t[2]=function(){return r.openTextfield&&r.openTextfield.apply(r,arguments)})},h,2),Object(n["g"])("div",{class:Object(n["m"])(["tool btn btn-shallow",{disabled:!r.selectedNode.loc}]),onClick:t[3]||(t[3]=function(){return r.toDeleteNode&&r.toDeleteNode.apply(r,arguments)})},j,2),Object(n["B"])(Object(n["g"])("div",{class:Object(n["m"])(["tool btn btn-shallow",{disabled:!r.selectedNode.loc}]),onClick:t[4]||(t[4]=function(){return r.nodeCancelSelect&&r.nodeCancelSelect.apply(r,arguments)})},v,2),[[n["y"],o.isTouchMode]]),Object(n["g"])("div",{class:Object(n["m"])(["tool btn btn-shallow",{disabled:!["h1","h2","h3","h4","p","li"].includes(r.selectedNode.type)}]),onClick:t[5]||(t[5]=function(){return r.openColors&&r.openColors.apply(r,arguments)})},m,2),Object(n["g"])("div",{class:"tool btn btn-shallow",onClick:t[6]||(t[6]=function(){return r.clearNodes&&r.clearNodes.apply(r,arguments)})},y),Object(n["g"])("div",{class:"tool btn btn-shallow",onClick:t[7]||(t[7]=function(){return r.openUploader&&r.openUploader.apply(r,arguments)})},w),Object(n["g"])("div",{class:"tool btn btn-shallow",onClick:t[8]||(t[8]=function(){return r.saveNote&&r.saveNote.apply(r,arguments)})},k),Object(n["g"])("div",{class:"tool btn btn-shallow",onClick:t[9]||(t[9]=function(){return r.readNote&&r.readNote.apply(r,arguments)})},[Object(n["g"])("i",x,[L,Object(n["g"])("input",M,null,512)])])])])}o("a630"),o("3ca3"),o("e9c4");var _=function(e){return Object(n["q"])("data-v-1daaa161"),e=e(),Object(n["p"])(),e},I={class:"info-outer"},A=_((function(){return Object(n["g"])("i",{class:"material-icons"},"close",-1)})),D=[A],F=_((function(){return Object(n["g"])("div",{class:"info"},[Object(n["g"])("h1",null,"关于 | About"),Object(n["g"])("hr"),Object(n["g"])("h2",null,"此 | This"),Object(n["g"])("p",null," 一个运行在浏览器上的笔记程序。| A notebook application works on your Browser. "),Object(n["g"])("hr"),Object(n["g"])("h2",null,"作者 | Author"),Object(n["g"])("p",null,[Object(n["i"])(" GitHub: "),Object(n["g"])("a",{href:"https://github.com/BHznJNs",target:"_blank"},"https://github.com/BHznJNs"),Object(n["g"])("br"),Object(n["i"])(" BiliBili: "),Object(n["g"])("a",{href:"https://space.bilibili.com/274945998",target:"_blank"},"https://space.bilibili.com/274945998"),Object(n["g"])("br")]),Object(n["g"])("hr"),Object(n["g"])("h2",null,"框架 | Framework"),Object(n["g"])("p",null,[Object(n["i"])(" Vue.js "),Object(n["g"])("a",{href:"https://v3.cn.vuejs.org/",target:"_blank"},"https://v3.cn.vuejs.org/"),Object(n["g"])("br"),Object(n["i"])(" MDUI "),Object(n["g"])("a",{href:"https://www.mdui.org/",target:"_blank"},"https://www.mdui.org/")])],-1)}));function B(e,t,o,c,i,s){var l=Object(n["u"])("window");return Object(n["o"])(),Object(n["e"])(l,{width:"800px",height:"480px",disabled:o.disabled,onClose:s.close},{default:Object(n["A"])((function(){return[Object(n["g"])("div",I,[Object(n["g"])("div",{class:"closer shadow-1",onClick:t[0]||(t[0]=function(){return s.close&&s.close.apply(s,arguments)})},D),F])]})),_:1},8,["disabled","onClose"])}var $={class:"window-outer"};function E(e,t,o,c,i,s){return Object(n["o"])(),Object(n["f"])("div",{class:Object(n["m"])(["window-container",{disabled:o.disabled}])},[Object(n["g"])("div",{class:"fullscreen-mask",onClick:t[0]||(t[0]=function(){return s.close&&s.close.apply(s,arguments)})}),Object(n["g"])("div",$,[Object(n["g"])("div",{class:"window shadow-16",style:Object(n["n"])({width:o.width,height:o.height})},[Object(n["t"])(e.$slots,"default",{},void 0,!0)],4)])],2)}var U={props:["width","height","disabled"],methods:{close:function(){this.$emit("close")}}},H=(o("4b7b"),o("6b0d")),V=o.n(H);const R=V()(U,[["render",E],["__scopeId","data-v-6e558882"]]);var G=R,q={components:{Window:G},props:["disabled"],methods:{close:function(){this.$parent.isInfoWindowShow=!1}}};o("fec1");const K=V()(q,[["render",B],["__scopeId","data-v-1daaa161"]]);var W=K,J={inject:["note"],computed:{getThisObj:function(){var e;if(this.location)return this.getNodeObj({location:this.location,callback:function(t,o){e=t[o]}}),e}},methods:{getNodeObj:function(e){var t=e.parentObj,o=void 0===t?this.note:t,n=e.location,c=e.num,i=void 0===c?0:c,s=e.callback;i==n.length-1?s&&s(o.CTS,n[i]):this.getNodeObj({parentObj:o.CTS[n[i]],location:n,num:i+1,callback:s})}}};const P=J;var z=P,Q=(o("a434"),{methods:{insertNode:function(e,t){e&&t&&this.getNodeObj({location:t,callback:function(t,o){t.splice(o+1,0,e)}})}}}),X={methods:{deleteNode:function(e){var t;return this.selectedNode.vnode&&(this.selectedNode.loc=null,this.selectedNode.type="",this.selectedNode.vnode=null,this.selectedNode.obj=null),this.getNodeObj({location:e,callback:function(e,o){t=e[o],e.splice(o,1)}}),t}}},Y=o("1344"),Z=new Y["a"],ee=o("21a6"),te=o.n(ee),oe={data:function(){return{isInfoIconShow:!1,isInfoWindowShow:!1}},props:["isTouchMode"],inject:["note","selectedNode"],components:{Info:W},mixins:[z,Q,X],mounted:function(){var e=this,t=this.$refs.fileUploader;t.addEventListener("change",(function(){var o=new FileReader;o.readAsText(t.files[0],"uft8"),o.onload=function(t){var o=t.target.result;e.note.CTS=JSON.parse(o),Z.emit("note-loaded")}})),Z.on("textfield-return-toolBar",(function(t){e.toInsertNode(t)}))},methods:{logoClick:function(){var e=this;this.isInfoIconShow=!0,setTimeout((function(){e.isInfoIconShow=!1}),3e3)},openTextfield:function(){Z.emit("textfield-open","toolBar")},toInsertNode:function(e){var t=Array.from(this.selectedNode.loc);this.insertNode(e,t),t[t.length-1]+=1,Z.emit("add-history",{loc:t,prop:"IST"})},toDeleteNode:function(){var e=this.selectedNode.loc,t=this.deleteNode(e);e[e.length-1]-=1,Z.emit("add-history",{loc:e,prop:"DEL",nodeObj:t})},nodeCancelSelect:function(){this.selectedNode.vnode.selected=!1,this.selectedNode.loc=null,this.selectedNode.obj=null,this.selectedNode.type=null},openColors:function(){Z.emit("fixedComponents-open","colors")},clearNodes:function(){this.note.CTS=[],this.note.HT=[],Z.emit("clear-history")},openUploader:function(){Z.emit("open-uploader")},saveNote:function(){var e=new Blob([JSON.stringify(this.note.CTS)],{type:"text/plain;charset=utf-8"}),t=this.note.NM||"MyNote";te()(e,t+".json")},readNote:function(){var e=this.$refs.fileUploader;e.click()}}};o("604f");const ne=V()(oe,[["render",S],["__scopeId","data-v-e843bde4"]]);var ce=ne,ie=function(e){return Object(n["q"])("data-v-79141601"),e=e(),Object(n["p"])(),e},se=ie((function(){return Object(n["g"])("i",{class:"material-icons"},"add",-1)})),le=[se];function re(e,t,o,c,i,s){var l=Object(n["u"])("floor-block"),r=Object(n["u"])("node-renderer"),a=Object(n["u"])("textfield-group");return Object(n["o"])(),Object(n["f"])("div",{class:Object(n["m"])(["note-outer shadow-4",{fullscreen:o.isFullscreen}])},[Object(n["g"])("div",{class:"note",ref:"note",onContextmenu:t[1]||(t[1]=Object(n["D"])((function(){}),["prevent"]))},[(Object(n["o"])(!0),Object(n["f"])(n["a"],null,Object(n["s"])(s.note.CTS,(function(e,t){return Object(n["o"])(),Object(n["f"])(n["a"],{key:e.id},["floor"==e.NT?(Object(n["o"])(),Object(n["e"])(l,{key:0,children:e.CTS,level:2,location:[t]},null,8,["children","location"])):(Object(n["o"])(),Object(n["e"])(r,{key:1,level:1,nodeObj:e,location:[t]},null,8,["nodeObj","location"]))],64)})),128)),Object(n["j"])(a,{id:"note-textfield-group",ref:"textfield",isAdding:i.isNodeAdding,onReturnNode:s.closeNodeAdder},null,8,["isAdding","onReturnNode"]),Object(n["g"])("div",{class:Object(n["m"])(["btn-fab adder-btn",{disabled:i.isNodeAdding,fullscreen:o.isFullscreen}]),onClick:t[0]||(t[0]=function(){return s.openNodeAdder&&s.openNodeAdder.apply(s,arguments)})},le,2)],544)],2)}var ae=o("c7eb"),de=o("1da1"),ue=o("b85c"),be=(o("fb6a"),o("38cf"),o("99af"),o("a15b"),["#","`","_","/","-",":"]),fe={"##":"strong","``":"code",__:"u","//":"i","--":"del","::":"span"};function he(e){var t,o=[],n="",c="",i=Object(ue["a"])(e);try{for(i.s();!(t=i.n()).done;){var s=t.value;be.includes(s)?s==c?(o.push({type:"text",content:n.slice(0,-1)}),o.push({type:"key",content:s.repeat(2)}),c="",n=""):(n+=s,c=s):(c.length&&(c=""),n+=s)}}catch(l){i.e(l)}finally{i.f()}return n.length&&o.push({type:"text",content:n}),o}function pe(e){var t,o=[],n="",c="",i="",s=Object(ue["a"])(e);try{for(s.s();!(t=s.n()).done;){var l=t.value,r=l.content;if(n+=r,"key"==l.type)if("key"==c){if(r!=i)continue;var a=fe[r];o.push({tagName:a,content:n}),c="",n=""}else c="key",i=r;else"key"!=c&&(o.push({tagName:"text",content:n}),n="")}}catch(u){s.e(u)}finally{s.f()}if(n.length){var d=o[o.length-1];d.content+=n}return o}function je(e,t){return"<".concat(e,">").concat(t,"</").concat(e,">")}function Oe(e){var t,o=[],n=Object(ue["a"])(e);try{for(n.s();!(t=n.n()).done;){var c=t.value;"text"==c.tagName?o.push(c.content):o.push(je(c.tagName,c.content))}}catch(i){n.e(i)}finally{n.f()}return o}function ve(e){if(!e)return null;var t,o=he(e),n=pe(o);t=Oe(n);var c=t.join("");return c}function ge(){return me.apply(this,arguments)}function me(){return me=Object(de["a"])(Object(ae["a"])().mark((function e(){var t,o,n,c,i,s;return Object(ae["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=document.getElementsByClassName("inline-style"),o=Object(ue["a"])(t),e.prev=2,o.s();case 4:if((n=o.n()).done){e.next=13;break}if(c=n.value,i=c.textContent,i){e.next=9;break}return e.abrupt("continue",11);case 9:s=ve(i,"HTML"),c.innerHTML=s;case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](2),o.e(e.t0);case 18:return e.prev=18,o.f(),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[2,15,18,21]])}))),me.apply(this,arguments)}var Te={outputer:ve,init:ge},ye=Object(n["g"])("div",{class:"mask"},null,-1);function Ce(e,t,o,c,i,s){var l=Object(n["u"])("floor-block",!0),r=Object(n["u"])("node-renderer"),a=Object(n["u"])("block-controls");return Object(n["o"])(),Object(n["f"])("div",{class:Object(n["m"])(["floor shadow-1",{"shadow-3":i.selected,"touch-mode":s.isTouchMode}]),onMouseenter:t[0]||(t[0]=function(){return e.onMouseEnter&&e.onMouseEnter.apply(e,arguments)}),onMouseleave:t[1]||(t[1]=function(){return e.onMouseLeave&&e.onMouseLeave.apply(e,arguments)})},[ye,(Object(n["o"])(!0),Object(n["f"])(n["a"],null,Object(n["s"])(o.children,(function(e,t){return Object(n["o"])(),Object(n["f"])(n["a"],{key:e.id},["floor"==e.NT?(Object(n["o"])(),Object(n["e"])(l,{key:0,children:e.CTS,level:o.level+1,location:o.location.concat([t])},null,8,["children","level","location"])):(Object(n["o"])(),Object(n["e"])(r,{key:1,nodeObj:e,level:o.level,location:o.location.concat([t])},null,8,["nodeObj","level","location"]))],64)})),128)),Object(n["j"])(a,{disabled:!e.hover,isTouchMode:s.isTouchMode,selected:i.selected,location:o.location,parentType:"floor"},null,8,["disabled","isTouchMode","selected","location"])],34)}var we={methods:{selectEvent:function(){this.selected?(Z.emit("fixedComponents-close"),this.selectedNode.loc=null,this.selectedNode.vnode=null,this.selectedNode.obj=null,this.selectedNode.type=null,this.selected=!1):(this.selectedNode.loc&&(this.selectedNode.vnode.selected=!1),this.selectedNode.loc=this.location,this.selectedNode.vnode=this,this.selectedNode.obj=this.getThisObj,this.selectedNode.type=this.tagName,this.selected=!0)}}},Ne={data:function(){return{selected:!1,initialContent:"",editing:!1,dbTouch:!1}},inject:["selectedNode"],mixins:[z,we],props:["tagName","content","location","color"],watch:{content:function(e){var t=this;this.$nextTick((function(){var o=Te.outputer(e);t.$el.innerHTML=o}))}},render:function(){var e=this;return Object(n["l"])(this.tagName,{contentEditable:!0,class:{selected:this.selected,editing:this.editing,"inline-style":!0},style:{color:this.color},onContextmenu:function(t){t.preventDefault(),e.initialContent||(e.initialContent=t.target.innerText),e.selectEvent()},onTouchstart:function(){e.dbTouch&&e.selectEvent(),e.dbTouch=!0,setTimeout((function(){e.dbTouch=!1}),300)},onClick:function(){e.editing||(e.initialContent=e.$el.innerText),e.editing=!0},onBlur:function(t){var o=t.target.innerText;o!=e.initialContent&&(e.getThisObj.CT=o,Z.emit("add-history",{loc:e.location,prop:"CT",before:e.initialContent,after:o}),e.initialContent=o),e.editing=!1}},this.content)}};const ke=Ne;var xe=ke,Le={props:["level","content","location","color"],components:[xe],mounted:function(){this.$nextTick((function(){Z.emit("anchor-mounted")}))},render:function(){var e;return e=this.level<6?"h"+this.level:"h5",Object(n["l"])(xe,{tagName:e,id:this.location.join(""),class:"heading",content:this.content,color:this.color,location:this.location})}};const Me=Le;var Se=Me,_e={data:function(){return{selected:!1,initialContent:"",editing:!1,dbRightClick:!1}},inject:["selectedNode"],mixins:[z,we],props:["tagName","content","location","color","href"],render:function(){var e=this;return Object(n["l"])(this.tagName,{contentEditable:!0,href:this.href,target:"_blank",class:{selected:this.selected,editing:this.editing,"inline-style":!0},style:{color:this.color},onClick:function(t){t.preventDefault(),window.open(e.href),e.$el.blur()},onContextmenu:function(t){t.preventDefault(),e.dbRightClick?e.selectEvent():(e.dbRightClick=!0,setTimeout((function(){e.dbRightClick=!1}),300),e.editing||(e.initialContent=t.target.innerText),e.editing=!0)},onBlur:function(t){var o=t.target.innerText;o!=e.initialContent&&(e.getThisObj.CT=o,Z.emit("add-history",{loc:e.location,prop:"CT",before:e.initialContent,after:o}),e.initialContent=o),e.editing=!1}},this.content)}};const Ie=_e;var Ae=Ie,De=Object(n["g"])("div",{class:"mask"},null,-1),Fe=Object(n["g"])("i",{class:"material-icons"},"playlist_add",-1),Be=[Fe],$e={class:"material-icons"},Ee={class:"material-icons"};function Ue(e,t,o,c,i,s){var l=Object(n["u"])("list-block",!0),r=Object(n["u"])("basic-node"),a=Object(n["u"])("list-child"),d=Object(n["u"])("block-controls");return Object(n["o"])(),Object(n["f"])("div",{class:Object(n["m"])(["list",{"shadow-2":i.selected,hover:e.hover,empty:!o.children.length,"touch-mode":s.isTouchMode,nested:i.isNested}]),onMouseenter:t[2]||(t[2]=function(){return e.onMouseEnter&&e.onMouseEnter.apply(e,arguments)}),onMouseleave:t[3]||(t[3]=function(){return e.onMouseLeave&&e.onMouseLeave.apply(e,arguments)})},[De,Object(n["j"])(a,{ordered:o.isOrdered},{default:Object(n["A"])((function(){return[(Object(n["o"])(!0),Object(n["f"])(n["a"],null,Object(n["s"])(o.children,(function(t,c){return Object(n["o"])(),Object(n["f"])(n["a"],{key:t.id},["list"==t.NT?(Object(n["o"])(),Object(n["e"])(l,{key:0,isOrdered:t.OL,children:t.CTS,location:o.location.concat([c]),onMouseInChild:e.onMouseLeave},null,8,["isOrdered","children","location","onMouseInChild"])):(Object(n["o"])(),Object(n["e"])(r,{key:1,tagName:"li",content:t.CT,color:t.CL,location:o.location.concat([c])},null,8,["content","color","location"]))],64)})),128))]})),_:1},8,["ordered"]),Object(n["j"])(d,{disabled:!e.hover,isTouchMode:s.isTouchMode,selected:i.selected,location:o.location,parentType:"list"},{default:Object(n["A"])((function(){return[Object(n["g"])("div",{class:"btn btn-normal tool-btn-in-block",onClick:t[0]||(t[0]=function(){return s.addListBlock&&s.addListBlock.apply(s,arguments)})},Be),Object(n["g"])("div",{class:"btn btn-normal tool-btn-in-block",onClick:t[1]||(t[1]=function(){return s.toggleOrdered&&s.toggleOrdered.apply(s,arguments)})},[Object(n["B"])(Object(n["g"])("i",$e,"format_list_bulleted",512),[[n["y"],o.isOrdered]]),Object(n["B"])(Object(n["g"])("i",Ee,"format_list_numbered",512),[[n["y"],!o.isOrdered]])])]})),_:1},8,["disabled","isTouchMode","selected","location"])],34)}var He=function(e){return Object(n["q"])("data-v-04fa293f"),e=e(),Object(n["p"])(),e},Ve=He((function(){return Object(n["g"])("i",{class:"material-icons"},"add",-1)})),Re=[Ve],Ge={class:"checkbox"},qe=["checked"];function Ke(e,t,o,c,i,s){return Object(n["o"])(),Object(n["f"])("div",{class:Object(n["m"])(["controls",{disabled:o.disabled&&!o.isTouchMode,"touch-mode":o.isTouchMode}])},[Object(n["g"])("div",{class:"btn btn-normal tool-btn-in-block",onClick:t[0]||(t[0]=function(){return e.addNode&&e.addNode.apply(e,arguments)})},Re),Object(n["t"])(e.$slots,"default",{},void 0,!0),Object(n["g"])("label",Ge,[Object(n["g"])("input",{type:"checkbox",ref:"checkbox",checked:o.selected,onChange:t[1]||(t[1]=function(){return s.selectEvent&&s.selectEvent.apply(s,arguments)})},null,40,qe),Object(n["g"])("i",{class:"checkbox-icon",onTouchstart:t[2]||(t[2]=function(){return s._touchstart&&s._touchstart.apply(s,arguments)}),onTouchend:t[3]||(t[3]=function(){return s._touchend&&s._touchend.apply(s,arguments)})},null,32)])],2)}var We={methods:{tableAdder:function(e){for(var t=e.length,o=e[0].length,n=[],c=0;c<o;c++)n.push("");e.push(n),Z.emit("add-history",{loc:this.location,prop:"ROW",before:t,after:t+1})},detailAdder:function(e){e.push({CT:"",CL:"#333"});var t=Object.create(this.location);t.push(e.length-1),Z.emit("add-history",{loc:t,prop:"IST"})},listAdder:function(e){e.push({NT:"li",CT:"",CL:"#333"});var t=Object.create(this.location);t.push(e.length-1),Z.emit("add-history",{loc:t,prop:"IST"})},floorAdder:function(e){var t=this;Z.off("textfield-return-"+this.parentType),Z.on("textfield-return-"+this.parentType,(function(o){o&&e.push(o);var n=Array.from(t.location);n.push(e.length-1),Z.emit("add-history",{loc:n,prop:"IST"}),Z.off("textfield-return-"+t.parentType)})),Z.emit("textfield-open",this.parentType)},addNode:function(){var e=this.getThisObj.CTS;switch(this.parentType){case"table":this.tableAdder(e);break;case"details":this.detailAdder(e);break;case"list":this.listAdder(e);break;case"floor":this.floorAdder(e)}}}},Je={data:function(){return{timeout:null}},props:["isTouchMode","parentType","disabled","location","selected"],inject:["selectedNode"],mixins:[z,We],methods:{_touchstart:function(){var e=this;this.timeout=setTimeout((function(){e.addNode()}),1e3)},_touchend:function(){clearTimeout(this.timeout)},selectEvent:function(){var e=this.$refs.checkbox.checked;this.$parent.selected=e,e?(this.selectedNode.loc&&(this.selectedNode.vnode.selected=!1),this.selectedNode.loc=this.location,this.selectedNode.vnode=this.$parent,this.selectedNode.type=this.parentType,"list"==this.parentType&&(this.selectedNode.type=this.$parent.isNested?"nestedList":"notNestedList")):(this.selectedNode.loc=null,this.selectedNode.vnode=null,this.selectedNode.type=null)}}};o("83d0"),o("c436");const Pe=V()(Je,[["render",Ke],["__scopeId","data-v-04fa293f"]]);var ze=Pe,Qe={data:function(){return{hover:!1,setTimeout:null}},methods:{onMouseEnter:function(){var e=this;this.setTimeout=setTimeout((function(){e.hover=!0}),400)},onMouseLeave:function(){clearTimeout(this.setTimeout),this.selected||(this.hover=!1)}}},Xe={name:"list-block",data:function(){return{selected:!1,isNested:null}},components:{BasicNode:xe,BlockControls:ze,listChild:{props:["ordered"],render:function(){return Object(n["l"])(this.ordered?"ol":"ul",this.$slots.default())}}},props:["children","isOrdered","location"],inject:["isTouchMode"],mixins:[z,Qe],methods:{addListBlock:function(){var e=this.getThisObj.CTS;e.push({NT:"list",OL:!1,CTS:[{NT:"li",CT:"",CL:"#333"}]});var t=Object.create(this.location);t.push(e.length-1),Z.emit("add-history",{loc:t,prop:"IST"})},toggleOrdered:function(){this.getThisObj.OL=!this.getThisObj.OL}},mounted:function(){var e=this.$el.parentNode;this.isNested="OL"==e.tagName||"UL"==e.tagName}};const Ye=V()(Xe,[["render",Ue]]);var Ze=Ye,et=Object(n["g"])("div",{class:"mask"},null,-1),tt=Object(n["g"])("i",{class:"material-icons"},"grid_on",-1),ot=[tt];function nt(e,t,o,c,i,s){var l=Object(n["u"])("table-row"),r=Object(n["u"])("block-controls");return Object(n["o"])(),Object(n["f"])("div",{class:Object(n["m"])(["table shadow-1",{"shadow-3":i.selected,"touch-mode":s.isTouchMode,hover:e.hover&&!s.isTouchMode}]),onMouseenter:t[1]||(t[1]=function(){return e.onMouseEnter&&e.onMouseEnter.apply(e,arguments)}),onMouseleave:t[2]||(t[2]=function(){return e.onMouseLeave&&e.onMouseLeave.apply(e,arguments)})},[et,Object(n["g"])("table",null,[Object(n["g"])("tbody",null,[(Object(n["o"])(!0),Object(n["f"])(n["a"],null,Object(n["s"])(o.children,(function(e,t){return Object(n["o"])(),Object(n["e"])(l,{key:e.id,children:e,location:o.location.concat(t)},null,8,["children","location"])})),128))])]),Object(n["j"])(r,{isTouchMode:s.isTouchMode,disabled:!e.hover,selected:i.selected,location:o.location,parentType:"table"},{default:Object(n["A"])((function(){return[Object(n["g"])("div",{class:"btn btn-normal tool-btn-in-block",onClick:t[0]||(t[0]=function(){return s.openTableSetter&&s.openTableSetter.apply(s,arguments)})},ot)]})),_:1},8,["isTouchMode","disabled","selected","location"])],34)}var ct=["onBlur"];function it(e,t,o,c,i,s){return Object(n["o"])(),Object(n["f"])("tr",null,[(Object(n["o"])(!0),Object(n["f"])(n["a"],null,Object(n["s"])(o.children,(function(e,o){return Object(n["o"])(),Object(n["f"])("td",{key:e.id,onClick:t[0]||(t[0]=function(){return s.edit&&s.edit.apply(s,arguments)}),onContextmenu:t[1]||(t[1]=function(){return s.edit&&s.edit.apply(s,arguments)}),onBlur:function(e){return s.finishEdit(e,o)},contenteditable:"true"},Object(n["w"])(e),41,ct)})),128))])}var st={mixins:[z],props:["children","location"],methods:{edit:function(e){var t=e.target;t.classList.add("editing")},finishEdit:function(e,t){var o=e.target;o.classList.remove("editing");var n=o.innerText;this.getThisObj[t]=n}}};const lt=V()(st,[["render",it]]);var rt=lt,at={data:function(){return{selected:!1}},props:["children","location"],inject:["isTouchMode"],mixins:[Qe],components:{TableRow:rt,BlockControls:ze},methods:{openTableSetter:function(){Z.emit("fixedComponents-open","tableSetter"),Z.emit("table-location",this.location)}}};const dt=V()(at,[["render",nt]]);var ut=dt;function bt(e,t,o,c,i,s){var l=Object(n["u"])("basic-node"),r=Object(n["u"])("block-controls");return Object(n["o"])(),Object(n["f"])("div",{class:Object(n["m"])(["details",{"shadow-2":i.selected,hover:e.hover,"touch-mode":s.isTouchMode}]),onMouseenter:t[2]||(t[2]=function(){return e.onMouseEnter&&e.onMouseEnter.apply(e,arguments)}),onMouseleave:t[3]||(t[3]=function(){return e.onMouseLeave&&e.onMouseLeave.apply(e,arguments)})},[Object(n["g"])("summary",{class:"summary",contenteditable:"true",ref:"summary",onBlur:t[0]||(t[0]=function(){return s.finishEdit&&s.finishEdit.apply(s,arguments)})},Object(n["w"])(o.summary),545),Object(n["g"])("details",null,[Object(n["g"])("summary",{onContextmenu:t[1]||(t[1]=function(t){return e.$refs.summary.focus()}),style:{"line-height":"1.4"}},null,32),(Object(n["o"])(!0),Object(n["f"])(n["a"],null,Object(n["s"])(o.children,(function(e,t){return Object(n["o"])(),Object(n["e"])(l,{key:e.id,tagName:"p",content:e.CT,color:e.CL,location:o.location.concat([t])},null,8,["content","color","location"])})),128))]),Object(n["j"])(r,{disabled:!e.hover,isTouchMode:s.isTouchMode,selected:i.selected,location:o.location,parentType:"details"},null,8,["disabled","isTouchMode","selected","location"])],34)}var ft={data:function(){return{selected:!1}},components:{BasicNode:xe,BlockControls:ze},mixins:[z,Qe],inject:["isTouchMode"],props:["children","summary","location"],methods:{finishEdit:function(e){var t=e.target,o=t.innerText;Z.emit("add-history",{loc:this.location,prop:"SUM",before:this.getThisObj.SUM,after:o}),this.getThisObj.SUM=o}}};o("8897");const ht=V()(ft,[["render",bt],["__scopeId","data-v-7df230aa"]]);var pt=ht;function jt(e,t,o,c,i,s){var l=Object(n["u"])("highlightjs");return t[0]||(Object(n["v"])(-1),t[0]=Object(n["j"])(l,{code:o.code,language:o.language,autodetect:!1,onFocusout:s.render,onContextmenu:s.select,tabindex:"0"},null,8,["code","language","onFocusout","onContextmenu"]),Object(n["v"])(1),t[0])}o("ac1f"),o("5319");var Ot=o("d383"),vt=o.n(Ot),gt=o("b056");o("4ec9"),o("d3b7"),o("ddb0");function mt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"end",o=window.getSelection(),n=o.getRangeAt(0),c=document.createTextNode(e);n.insertNode(c),"start"==t?o.collapseToStart():"end"==t?o.collapseToEnd():console.warn("Unknown direction type!")}function Tt(e){e.preventDefault(),mt("    ")}var yt=new Map([[")","("],["]","["],["}","{"],[">","<"]]),Ct=["html","xml","xhtml","svg","rss"];function wt(e,t){setTimeout((function(){t?(mt("".concat(yt.get(e),"\n    ")),mt("\n".concat(e),"start")):mt(e,"start")}),150)}var Nt={methods:{codeInput:function(e){switch(e.keyCode){case 9:Tt(e);break;case 57:e.shiftKey&&wt(")",e.altKey);break;case 219:e.shiftKey?wt("}",e.altKey):wt("]",e.altKey);break;case 188:Ct.includes(this.language)&&wt(">");break;case 222:e.shiftKey?wt('"'):wt("'");break;case 192:wt("`",e.altKey);break}}}},kt={data:function(){return{tagName:"code",codeNode:null,selected:!1}},components:{highlightjs:gt["a"].component},mixins:[z,we,Nt],inject:["selectedNode"],props:["language","code","location"],watch:{code:function(e){this.codeNode.innerHTML=e,vt.a.highlightElement(this.codeNode)}},methods:{render:function(){var e=this.codeNode.innerText;e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;");var t=this.getThisObj.CT,o=e;o!=t&&(Z.emit("add-history",{loc:this.location,prop:"CT",before:this.getThisObj.CT,after:e}),this.getThisObj.CT=e)},select:function(){this.selectEvent(),this.codeNode.classList.toggle("selected",this.selected)}},mounted:function(){var e=this;this.codeNode=this.$el.querySelector("code"),this.codeNode.contentEditable=!0,this.codeNode.addEventListener("keydown",this.codeInput),this.$nextTick((function(){e.codeNode.innerHTML=e.code,vt.a.highlightElement(e.codeNode)}))}};o("bde3");const xt=V()(kt,[["render",jt]]);var Lt=xt,Mt={props:["nodeObj","level","location"],render:function(){var e,t={location:this.location};switch(this.nodeObj.NT){case"h":e=Se,t.level=this.level,t.content=this.nodeObj.CT,t.color=this.nodeObj.CL;break;case"link":e=Ae,t.tagName="a",t.content=this.nodeObj.CT,t.color=this.nodeObj.CL,t.href=this.nodeObj.HF;break;case"list":e=Ze,t.isOrdered=this.nodeObj.OL,t.children=this.nodeObj.CTS;break;case"table":e=ut,t.children=this.nodeObj.CTS;break;case"details":e=pt,t.summary=this.nodeObj.SUM,t.children=this.nodeObj.CTS;break;case"code":e=Lt,t.language=this.nodeObj.LG,t.code=this.nodeObj.CT;break;default:e=xe,t.tagName=this.nodeObj.NT,t.content=this.nodeObj.CT,t.color=this.nodeObj.CL}return Object(n["l"])(e,t)}};const St=Mt;var _t=St,It={name:"floor-block",components:{BlockControls:ze,NodeRenderer:_t},data:function(){return{selected:!1}},props:["level","location","children"],inject:["isTouchMode"],mixins:[Qe]};const At=V()(It,[["render",Ce]]);var Dt=At,Ft={class:"selector",ref:"selector"},Bt=Object(n["h"])('<option value="h">标题</option><option value="p">段落</option><option value="link">链接</option><option value="hr">割线</option><option value="floor">层次</option><option value="ol">序列</option><option value="ul">乱列</option><option value="code">代码</option><option value="table">表格</option><option value="details">详情</option>',10),$t=[Bt],Et=Object(n["g"])("i",{class:"material-icons"},"close",-1),Ut=[Et];function Ht(e,t,o,c,i,s){return Object(n["o"])(),Object(n["f"])("div",{class:Object(n["m"])(["textfield-group shadow-2",{disabled:!o.isAdding}])},[Object(n["g"])("select",Ft,$t,512),Object(n["g"])("div",{class:"textfield",contenteditable:"true",ref:"inputter",onKeydown:t[0]||(t[0]=Object(n["C"])(Object(n["D"])((function(){return s.enter&&s.enter.apply(s,arguments)}),["prevent"]),["enter"]))},null,544),Object(n["g"])("div",{class:"textfield-closer closer",onClick:t[1]||(t[1]=function(e){return s.closeNodeAdder()})},Ut)],2)}var Vt=function(e,t){if(!t)return null;var o={NT:e};switch(e){case"h":case"p":case"li":o.CT=t,o.CL="#333";break;case"link":o.HF=t,o.CT="",o.CL="#333";break;case"hr":break;case"floor":o.CTS=[{NT:"h",CT:t,CL:"#333"}];break;case"ol":o.NT="list",o.CTS=[{NT:"li",CT:t,CL:"#333"}],o.OL=!0;break;case"ul":o.NT="list",o.CTS=[{NT:"li",CT:t,CL:"#333"}],o.OL=!1;break;case"code":o.LG=t,o.CT="";break;case"table":o.CTS=[[t,"","",""],["","","",""]];break;case"details":o.SUM=t,o.CTS=[{CT:"",CL:"#333"}];break}return o},Rt={props:["isAdding"],inject:["note"],methods:{focus:function(){var e=this.$refs.inputter;e.focus()},enter:function(){this.closeNodeAdder()},closeNodeAdder:function(){var e=this.$refs.selector,t=this.$refs.inputter,o=e.value,n=t.innerText,c=Vt(o,n);this.$emit("return-node",c),t.blur(),t.innerText=""}}};const Gt=V()(Rt,[["render",Ht]]);var qt=Gt,Kt={components:{FloorBlock:Dt,NodeRenderer:_t,TextfieldGroup:qt},data:function(){return{isNodeAdding:!1}},props:["isFullscreen"],inject:["note"],created:function(){var e=this;addEventListener("keydown",(function(t){var o=t.altKey,n=t.key;o&&"a"==n&&(t.preventDefault(),e.openNodeAdder())}))},mounted:function(){var e=this;this.$nextTick((function(){Te.init()})),Z.on("note-loaded",(function(){e.$nextTick((function(){Te.init()}))}))},methods:{openNodeAdder:function(){var e=this;location.href="#note-textfield-group",this.isNodeAdding=!0,this.$nextTick((function(){e.$refs.textfield.focus()}))},closeNodeAdder:function(e){this.isNodeAdding=!1;var t=this.note.CTS;e&&t.push(e);var o=[t.length-1];Z.emit("add-history",{loc:o,prop:"IST"})}},watch:{isFullscreen:function(e,t){var o=this;e!=t&&(this.$refs.note.style.display="none",setTimeout((function(){o.$refs.note.style.display="block"}),1200))}}};o("8a36");const Wt=V()(Kt,[["render",re],["__scopeId","data-v-79141601"]]);var Jt=Wt;function Pt(e,t,o,c,i,s){var l=Object(n["u"])("anchors-view"),r=Object(n["u"])("drawer");return Object(n["o"])(),Object(n["f"])("div",null,[Object(n["j"])(r,{title:"笔记摘要",disabled:i.drawerDisabled,onCloseDrawer:t[0]||(t[0]=function(e){return i.drawerDisabled=!0})},{default:Object(n["A"])((function(){return[Object(n["j"])(l,{list:i.anchorList},null,8,["list"])]})),_:1},8,["disabled"])])}o("d81d");var zt={class:"titlebar shadow-4"},Qt={class:"closer circle"},Xt={class:"drawer-view"};function Yt(e,t,o,c,i,s){return Object(n["o"])(),Object(n["f"])(n["a"],null,[Object(n["g"])("div",{class:Object(n["m"])(["fullscreen-mask",{disabled:o.disabled}]),onClick:t[0]||(t[0]=function(){return s.close&&s.close.apply(s,arguments)})},null,2),Object(n["g"])("div",{class:Object(n["m"])(["drawer",{disabled:o.disabled}])},[Object(n["g"])("div",zt,[Object(n["g"])("div",Qt,[Object(n["g"])("i",{class:"material-icons arrow-forward",onClick:t[1]||(t[1]=function(){return s.close&&s.close.apply(s,arguments)})},"arrow_forward"),Object(n["g"])("i",{class:"material-icons arrow-upward",onClick:t[2]||(t[2]=function(){return s.close&&s.close.apply(s,arguments)})},"arrow_upward")]),Object(n["g"])("h1",null,Object(n["w"])(o.title),1)]),Object(n["g"])("div",Xt,[Object(n["t"])(e.$slots,"default")])],2)],64)}var Zt={props:["title","disabled"],emits:["close-drawer"],methods:{close:function(){this.$emit("close-drawer")}}};o("aee9");const eo=V()(Zt,[["render",Yt]]);var to=eo,oo={data:function(){return{drawerDisabled:!0,anchorList:[],timeout:null}},components:{Drawer:to,AnchorsView:{props:["list"],render:function(){var e=this.list.map((function(e){return Object(n["l"])("a",{level:e.level,href:"#"+e.href},e.content)}));return Object(n["l"])("div",e)}}},inject:["note"],methods:{getAnchors:function(){var e,t=document.querySelectorAll(".heading"),o=[],n=Object(ue["a"])(t);try{for(n.s();!(e=n.n()).done;){var c=e.value;o.push({level:c.tagName,href:c.id,content:c.innerText})}}catch(i){n.e(i)}finally{n.f()}return o},close:function(){this.drawerDisabled=!0}},mounted:function(){var e=this;Z.on("open-anchors",(function(){e.drawerDisabled=!1})),Z.on("anchor-mounted",(function(){e.timeout&&(clearTimeout(e.timeout),e.timeout=null),e.timeout=setTimeout((function(){e.anchorList=e.getAnchors()}))}))}};const no=V()(oo,[["render",Pt]]);var co=no,io=function(e){return Object(n["q"])("data-v-c8fd90ac"),e=e(),Object(n["p"])(),e},so=io((function(){return Object(n["g"])("div",{class:"block"},[Object(n["g"])("div",{class:"mask"}),Object(n["g"])("i",{class:"material-icons"},"apps")],-1)})),lo=io((function(){return Object(n["g"])("i",{class:"material-icons"},"subtitles",-1)})),ro=[lo],ao={class:"material-icons"},uo={class:"material-icons"},bo=io((function(){return Object(n["g"])("i",{class:"material-icons"},"touch_app",-1)})),fo=[bo],ho={class:"material-icons"},po={class:"material-icons"};function jo(e,t,o,c,i,s){return Object(n["o"])(),Object(n["f"])("div",{class:Object(n["m"])(["controlballs",{fullscreen:o.isFullscreen}])},[so,Object(n["g"])("div",{class:"ball btn",onClick:t[0]||(t[0]=function(){return s.openAnchors&&s.openAnchors.apply(s,arguments)})},ro),Object(n["g"])("div",{class:"ball btn",onClick:t[1]||(t[1]=function(t){return e.$emit("toggle-darkMode")})},[Object(n["B"])(Object(n["g"])("i",ao,"brightness_2",512),[[n["y"],!o.isDarkMode]]),Object(n["B"])(Object(n["g"])("i",uo,"wb_sunny",512),[[n["y"],o.isDarkMode]])]),Object(n["g"])("div",{class:Object(n["m"])(["ball btn",{black:o.isTouchMode}]),onClick:t[2]||(t[2]=function(t){return e.$emit("toggle-touchMode")})},fo,2),Object(n["g"])("div",{class:"ball btn",onClick:t[3]||(t[3]=function(t){return e.$emit("toggle-fullscreen")})},[Object(n["B"])(Object(n["g"])("i",ho,"fullscreen",512),[[n["y"],!o.isFullscreen]]),Object(n["B"])(Object(n["g"])("i",po,"fullscreen_exit",512),[[n["y"],o.isFullscreen]])])],2)}var Oo={props:["isDarkMode","isTouchMode","isFullscreen"],emits:["toggle-darkMode","toggle-touchMode","toggle-fullscreen"],methods:{openAnchors:function(){Z.emit("open-anchors")}}};o("0d55");const vo=V()(Oo,[["render",jo],["__scopeId","data-v-c8fd90ac"]]);var go=vo,mo=function(e){return Object(n["q"])("data-v-6a7a9ad4"),e=e(),Object(n["p"])(),e},To={class:"uploader"},yo=mo((function(){return Object(n["g"])("i",{class:"material-icons"},"close",-1)})),Co=[yo],wo={class:"note-view-outer"},No={class:"note-view"},ko={class:"input-group"},xo={class:"buttons shadow-3"},Lo=mo((function(){return Object(n["g"])("i",{class:"material-icons"},"cloud_upload",-1)})),Mo=[Lo],So=mo((function(){return Object(n["g"])("i",{class:"material-icons"},"file_download",-1)})),_o=[So],Io=mo((function(){return Object(n["g"])("i",{class:"material-icons"},"create_new_folder",-1)})),Ao=[Io],Do=mo((function(){return Object(n["g"])("i",{class:"material-icons"},"delete_forever",-1)})),Fo=[Do];function Bo(e,t,o,c,i,s){var l=Object(n["u"])("uploader-list"),r=Object(n["u"])("textfield-group"),a=Object(n["u"])("window");return Object(n["o"])(),Object(n["e"])(a,{width:"800px",height:"480px",disabled:i.disabled,onClose:t[7]||(t[7]=function(e){return i.disabled=!0})},{default:Object(n["A"])((function(){return[Object(n["g"])("div",To,[Object(n["g"])("div",{class:"closer shadow-1",onClick:t[0]||(t[0]=function(e){return i.disabled=!0})},Co),Object(n["g"])("div",wo,[Object(n["g"])("div",No,[Object(n["j"])(l,{list:i.noteList},null,8,["list"]),Object(n["j"])(r,{onReturnNode:e.creatFolder,isAdding:i.addingFolder,ref:"textfieldGroup"},null,8,["onReturnNode","isAdding"])])]),Object(n["g"])("div",ko,[Object(n["B"])(Object(n["g"])("input",{class:"inputter",type:"text",placeholder:"笔记名",maxlength:"20","onUpdate:modelValue":t[1]||(t[1]=function(e){return s.note.NM=e})},null,512),[[n["x"],s.note.NM]]),Object(n["B"])(Object(n["g"])("input",{class:"inputter",type:"password",placeholder:"密码",maxlength:"10","onUpdate:modelValue":t[2]||(t[2]=function(e){return i.password=e})},null,512),[[n["x"],i.password]])]),Object(n["g"])("div",xo,[Object(n["g"])("div",{class:"btn btn-shallow",onClick:t[3]||(t[3]=function(){return e.upload&&e.upload.apply(e,arguments)})},Mo),Object(n["g"])("div",{class:"btn btn-shallow",onClick:t[4]||(t[4]=function(){return e.download&&e.download.apply(e,arguments)})},_o),Object(n["g"])("div",{class:"btn btn-shallow",onClick:t[5]||(t[5]=function(){return s.toCreatFolder&&s.toCreatFolder.apply(s,arguments)})},Ao),Object(n["g"])("div",{class:"btn btn-shallow",onClick:t[6]||(t[6]=function(){return e.deleteFile&&e.deleteFile.apply(e,arguments)})},Fo)])])]})),_:1},8,["disabled"])}var $o=o("bc3a"),Eo=o.n($o),Uo=o("53ca"),Ho=function(e){return Object(n["q"])("data-v-e47aff0c"),e=e(),Object(n["p"])(),e},Vo=Ho((function(){return Object(n["g"])("div",{class:"no-note"},"暂无笔记",-1)})),Ro=[Vo],Go={class:"note-list",ref:"noteList"};function qo(e,t,o,c,i,s){var l=Object(n["u"])("uploader-list-folder"),r=Object(n["u"])("uploader-list-file");return Object(n["o"])(),Object(n["f"])(n["a"],null,[Object(n["B"])(Object(n["g"])("div",null,Ro,512),[[n["y"],!o.list.length]]),Object(n["g"])("ul",Go,[(Object(n["o"])(!0),Object(n["f"])(n["a"],null,Object(n["s"])(o.list,(function(e,t){return Object(n["o"])(),Object(n["f"])(n["a"],{key:e.id},["object"==Object(Uo["a"])(e)?(Object(n["o"])(),Object(n["e"])(l,{key:0,location:[t],name:e[0],list:e[1]},null,8,["location","name","list"])):(Object(n["o"])(),Object(n["e"])(r,{key:1,location:[t],name:e},null,8,["location","name"]))],64)})),128))],512)],64)}o("b0c0");var Ko={class:"folder-item"},Wo={class:"item-name"},Jo={class:"folder"};function Po(e,t,o,c,i,s){var l=Object(n["u"])("uploader-list-folder",!0),r=Object(n["u"])("uploader-list-file");return Object(n["o"])(),Object(n["f"])("li",Ko,[Object(n["g"])("div",{class:Object(n["m"])(["item",{selected:e.selected}]),onClick:t[1]||(t[1]=function(){return s.collapse&&s.collapse.apply(s,arguments)})},[Object(n["g"])("i",{class:"item-avatar material-icons",onClick:t[0]||(t[0]=Object(n["D"])((function(){return e.select&&e.select.apply(e,arguments)}),["stop"]))},"folder_open"),Object(n["g"])("span",Wo,Object(n["w"])(o.name),1)],2),Object(n["B"])(Object(n["g"])("ul",Jo,[(Object(n["o"])(!0),Object(n["f"])(n["a"],null,Object(n["s"])(o.list,(function(e,t){return Object(n["o"])(),Object(n["f"])(n["a"],{key:e.id},["object"==Object(Uo["a"])(e)?(Object(n["o"])(),Object(n["e"])(l,{key:0,location:o.location.concat([t]),name:e[0],list:e[1]},null,8,["location","name","list"])):(Object(n["o"])(),Object(n["e"])(r,{key:1,location:o.location.concat([t]),name:e},null,8,["location","name"]))],64)})),128))],512),[[n["y"],!i.collapsed]])])}var zo={data:function(){return{selected:!1}},inject:["selectedItem"],methods:{select:function(){this.selected?(this.selected=!1,this.selectedItem.loc=[],this.selectedItem.type="",this.selectedItem.obj=null):(this.selected=!0,this.selectedItem.obj&&(this.selectedItem.obj.selected=!1),this.selectedItem.loc=this.location,this.selectedItem.type=this.type,this.selectedItem.obj=this)}}},Qo=Object(n["g"])("i",{class:"item-avatar material-icons"},"assignment",-1),Xo={class:"item-name"};function Yo(e,t,o,c,i,s){return Object(n["o"])(),Object(n["f"])("li",{class:Object(n["m"])(["item",{selected:e.selected}]),onClick:t[0]||(t[0]=function(){return e.select&&e.select.apply(e,arguments)})},[Qo,Object(n["g"])("span",Xo,Object(n["w"])(o.name),1)],2)}var Zo={props:["location","name"],mixins:[zo],data:function(){return{type:"file"}}};const en=V()(Zo,[["render",Yo]]);var tn=en,on={name:"uploader-list-folder",components:{UploaderListFile:tn},mixins:[zo],props:["location","name","list"],data:function(){return{type:"folder",collapsed:!0}},methods:{collapse:function(){this.collapsed=!this.collapsed}}};o("85ea");const nn=V()(on,[["render",Po],["__scopeId","data-v-3eae6352"]]);var cn=nn,sn={props:["list"],emits:["file-select"],components:{UploaderListFolder:cn,UploaderListFile:tn}};o("d7b3");const ln=V()(sn,[["render",qo],["__scopeId","data-v-e47aff0c"]]);var rn=ln;function an(e){var t;return t="string"==typeof e?e:e[0],t}var dn={methods:{getTargetName:function(){var e,t=this.selected.loc,o=this.noteList;if(1==t.length){var n=t[0],c=o[n];e=an(c)}else{var i;for(var s in e=[],t){var l=t[s];i=0==s?o[l]:i[1][l];var r=an(i);e.push(r)}e=e.join("/")}return e}}},un={mixins:[dn],methods:{upload:function(){var e,t,o=this,n=this.note.NM;this.selected.obj&&"folder"==this.selected.type&&(e=this.selected.loc,t=this.getTargetName());var c={NM:this.note.NM,CTS:this.note.CTS};Eo.a.put("/api/upload",{note:JSON.stringify(c),folderLoc:e,folderName:t,noteName:n,password:this.password}).then((function(e){e.data.code?Z.emit("show-msg",e.data.msg):(e.data.isNew&&(o.noteList=e.data.noteList),Z.emit("show-msg","笔记上传成功。"))})).catch((function(e){console.warn(e),Z.emit("show-msg","笔记上传请求失败。")}))},download:function(){var e=this;if(this.selected.obj){var t=this.selected.type;if("folder"!=t){var o=this.selected.loc,n=this.getTargetName();Eo.a.post("/api/download",{location:o,name:n,type:t,password:this.password}).then((function(t){if(t.data.code)5==t.data.code?(e.noteList=t.data.noteList,Z.emit("show-msg",t.data.msg)):Z.emit("show-msg",t.data.msg);else{Z.emit("show-msg","笔记下载成功。");var o=confirm("将覆盖当前笔记，是否继续？");if(o){var n=t.data.noteContent,c=JSON.parse(n);e.note.NM=c.NM,e.note.CTS=c.CTS,Z.emit("note-loaded"),document.title="".concat(c.NM," -- BNotee")}}})).catch((function(e){console.warn(e),Z.emit("下载文件请求错误！")}))}else alert("不能下载文件夹。")}else alert("请选择文件！")},creatFolder:function(e){var t=this;if(this.addingFolder=!1,e){var o,n,c=e.CT;this.selected.obj&&"folder"==this.selected.type&&(o=this.selected.loc,n=this.getTargetName()),Eo.a.post("/api/create-folder",{folderName:n,folderLoc:o,name:c,password:this.password}).then((function(e){e.data.code?Z.emit("show-msg",e.data.msg):(Z.emit("show-msg","文件夹创建成功。"),t.noteList=e.data.noteList)})).catch((function(e){console.warn(e),Z.emit("创建文件夹请求错误。")}))}},deleteFile:function(){var e=this,t=confirm("此操作无法撤销，你确定吗？");if(t)if(this.selected.obj){var o=this.getTargetName(),n=this.selected.type,c=this.selected.loc;Eo.a.delete("/api/delete",{data:{name:o,type:n,location:c,password:this.password}}).then((function(t){t.data.code?5==t.data.code?(e.noteList=t.data.noteList,Z.emit("show-msg",t.data.msg)):Z.emit("show-msg",t.data.msg):(e.noteList=t.data.noteList,Z.emit("show-msg","文件删除成功。"))})).catch((function(e){console.warn(e),Z.emit("删除文件请求错误。")}))}else alert("请选择文件或文件夹。")}}},bn={components:{Window:G,UploaderList:rn,TextfieldGroup:qt},mixins:[un,dn],inject:["note"],data:function(){return{disabled:!0,selected:{loc:[],type:"",obj:null},addingFolder:!1,password:"",noteList:[]}},provide:function(){return{selectedItem:this.selected}},methods:{toCreatFolder:function(){var e=this;this.addingFolder=!0,this.$nextTick((function(){e.$refs.textfieldGroup.focus()}))},show:function(){this.getTargetName()}},mounted:function(){var e=this;Z.on("open-uploader",(function(){if(e.disabled=!1,!e.noteList.length){var t=(new Date).getTime();Eo.a.get("/note-list?timestamp=".concat(t)).then((function(t){e.noteList=t.data.noteList})).catch((function(){Z.emit("show-msg","笔记列表获取错误。")}))}}))}};o("ecff");const fn=V()(bn,[["render",Bo],["__scopeId","data-v-6a7a9ad4"]]);var hn=fn;function pn(e,t,o,c,i,s){var l=Object(n["u"])("textfield-group-fixed"),r=Object(n["u"])("colors"),a=Object(n["u"])("table-setter"),d=Object(n["u"])("history");return Object(n["o"])(),Object(n["f"])("div",null,[Object(n["j"])(l,{onClose:s.close,disabled:i.textfieldGroupDisabled},null,8,["onClose","disabled"]),Object(n["j"])(r,{onClose:s.close,disabled:i.colorsDisabled},null,8,["onClose","disabled"]),Object(n["j"])(a,{onClose:s.close,disabled:i.tableSetterDisabled},null,8,["onClose","disabled"]),Object(n["j"])(d,{disabled:i.historyDisabled},null,8,["disabled"])])}var jn={class:"textfield-group fixed-component fixed"},On={class:"selector",ref:"selector"},vn=Object(n["g"])("option",{value:"h"},"标题",-1),gn=Object(n["g"])("option",{value:"p"},"段落",-1),mn=Object(n["g"])("option",{value:"link"},"链接",-1),Tn=Object(n["g"])("option",{value:"hr"},"割线",-1),yn=Object(n["g"])("option",{value:"floor"},"层次",-1),Cn=Object(n["g"])("option",{value:"ol"},"序列",-1),wn=Object(n["g"])("option",{value:"ul"},"乱列",-1),Nn=Object(n["g"])("option",{value:"code"},"代码",-1),kn=Object(n["g"])("option",{value:"table"},"表格",-1),xn=Object(n["g"])("option",{value:"details"},"详情",-1),Ln=[vn,gn,mn,Tn,yn,Cn,wn,Nn,kn,xn],Mn={class:"selector",ref:"selector4List"},Sn=Object(n["g"])("option",{value:"li"},"列项",-1),_n=Object(n["g"])("option",{value:"ol"},"序列",-1),In=Object(n["g"])("option",{value:"ul"},"乱列",-1),An=[Sn,_n,In],Dn=Object(n["g"])("i",{class:"material-icons"},"close",-1),Fn=[Dn];function Bn(e,t,o,c,i,s){return Object(n["o"])(),Object(n["e"])(n["b"],{name:"slide"},{default:Object(n["A"])((function(){return[Object(n["B"])(Object(n["g"])("div",jn,[Object(n["B"])(Object(n["g"])("select",On,Ln,512),[[n["y"],!s.isFromNestedList]]),Object(n["B"])(Object(n["g"])("select",Mn,An,512),[[n["y"],s.isFromNestedList]]),Object(n["g"])("div",{class:"textfield",ref:"inputer",contenteditable:"true",onKeydown:t[0]||(t[0]=Object(n["C"])((function(){return s.onEnter&&s.onEnter.apply(s,arguments)}),["enter"]))},null,544),Object(n["g"])("div",{class:"textfield-closer closer",onClick:t[1]||(t[1]=function(){return s.closeTextfield&&s.closeTextfield.apply(s,arguments)})},Fn)],512),[[n["y"],!o.disabled]])]})),_:1})}var $n={data:function(){return{commandFrom:""}},props:["disabled"],inject:["selectedNode"],computed:{isFromNestedList:function(){return"list"==this.commandFrom||["li","nestedList"].includes(this.selectedNode.type)}},mounted:function(){var e=this;Z.on("textfield-open",(function(t){e.commandFrom=t}))},methods:{onEnter:function(e){e.altKey&&(e.preventDefault(),this.closeTextfield())},closeTextfield:function(){this.$emit("close","textfieldGroup");var e=this.isFromNestedList?this.$refs.selector4List.value:this.$refs.selector.value,t=this.$refs.inputer.innerText,o=Vt(e,t);Z.emit("textfield-return-"+this.commandFrom,o),this.$refs.inputer.blur(),this.$refs.inputer.innerText=""}}};const En=V()($n,[["render",Bn]]);var Un=En,Hn=function(e){return Object(n["q"])("data-v-0a22116a"),e=e(),Object(n["p"])(),e},Vn={class:"colors fixed-component"},Rn=["onClick"],Gn={class:"input-group"},qn=Hn((function(){return Object(n["g"])("i",{class:"material-icons"},"close",-1)})),Kn=[qn];function Wn(e,t,o,c,i,s){return Object(n["o"])(),Object(n["e"])(n["b"],{name:"slide"},{default:Object(n["A"])((function(){return[Object(n["B"])(Object(n["g"])("div",Vn,[(Object(n["o"])(!0),Object(n["f"])(n["a"],null,Object(n["s"])(i.colors,(function(e){return Object(n["o"])(),Object(n["f"])("div",{key:e.id,class:"color btn btn-shallow",style:Object(n["n"])({"background-color":e}),onClick:function(t){return s.setColor(e)}},null,12,Rn)})),128)),Object(n["g"])("div",Gn,[Object(n["g"])("div",{class:"hint",onClick:t[0]||(t[0]=function(t){return e.$refs.colorInputter.click()})},"#"),Object(n["B"])(Object(n["g"])("input",{type:"color",ref:"colorInputter","onUpdate:modelValue":t[1]||(t[1]=function(e){return i.colorValue=e})},null,512),[[n["y"],!1],[n["x"],i.colorValue]]),Object(n["B"])(Object(n["g"])("input",{class:"inputter",placeholder:"******",type:"text",maxlength:"8","onUpdate:modelValue":t[2]||(t[2]=function(e){return i.colorValue=e})},null,512),[[n["x"],i.colorValue]])]),Object(n["g"])("div",{class:"closer",onClick:t[3]||(t[3]=function(t){return e.$emit("close","colors")})},Kn)],512),[[n["y"],!o.disabled]])]})),_:1})}var Jn={data:function(){return{colors:["#D50000","#FFD600","#333"],colorValue:"",timeout:null}},props:["disabled"],inject:["selectedNode"],mixins:[z],methods:{getColor:function(){var e=this.selectedNode.obj,t=e.CL;this.colorValue=t},setColor:function(e){var t=this.selectedNode.loc,o=this.selectedNode.obj,n=o.CL;o.CL=e,Z.emit("add-history",{loc:t,prop:"CL",before:n,after:e})}},watch:{colorValue:function(e){var t=this;clearTimeout(this.timeout),this.colorValue=e.replace("#",""),this.timeout=setTimeout((function(){t.setColor("#"+t.colorValue)}),300)},disabled:function(e){e||this.getColor()}}};o("3e29");const Pn=V()(Jn,[["render",Wn],["__scopeId","data-v-0a22116a"]]);var zn=Pn,Qn=function(e){return Object(n["q"])("data-v-75915245"),e=e(),Object(n["p"])(),e},Xn={class:"table-setter fixed-component"},Yn={class:"input-group"},Zn=Qn((function(){return Object(n["g"])("i",{class:"hint material-icons"},"view_headline",-1)})),ec={class:"input-group"},tc=Qn((function(){return Object(n["g"])("i",{class:"hint material-icons"},"view_column",-1)})),oc=Qn((function(){return Object(n["g"])("i",{class:"material-icons"},"check",-1)})),nc=[oc],cc=Qn((function(){return Object(n["g"])("i",{class:"material-icons"},"close",-1)})),ic=[cc];function sc(e,t,o,c,i,s){return Object(n["o"])(),Object(n["e"])(n["b"],{name:"slide"},{default:Object(n["A"])((function(){return[Object(n["B"])(Object(n["g"])("div",Xn,[Object(n["g"])("div",Yn,[Zn,Object(n["B"])(Object(n["g"])("input",{class:"inputter",type:"text",placeholder:" > 0 ","onUpdate:modelValue":t[0]||(t[0]=function(e){return i.row=e})},null,512),[[n["x"],i.row]])]),Object(n["g"])("div",ec,[tc,Object(n["B"])(Object(n["g"])("input",{class:"inputter",type:"text",placeholder:" > 0 ",maxlength:"3","onUpdate:modelValue":t[1]||(t[1]=function(e){return i.col=e})},null,512),[[n["x"],i.col]])]),Object(n["g"])("div",{class:"closer",onClick:t[2]||(t[2]=function(){return s.tableSet&&s.tableSet.apply(s,arguments)})},nc),Object(n["g"])("div",{class:"closer",onClick:t[3]||(t[3]=function(t){return e.$emit("close","tableSetter")})},ic)],512),[[n["y"],!o.disabled]])]})),_:1})}var lc={data:function(){return{row:1,col:1,targetNode:null,targetNodeLoc:[],timeout:null}},props:["disabled"],mixins:[z],mounted:function(){var e=this,t={ROW:"row",COL:"col"};Z.on("table-location",(function(t){e.tableGet(t)})),Z.on("table-edit",(function(o){var n=o.historyObj,c=o.resultValue;e.tableGet(n.loc);var i=t[n.prop];e[i]=n[c],e.tableSet(!1)}))},methods:{eventListen:function(e){var t=e.key;"Enter"==t&&this.tableSet(!0)},tableGet:function(e){var t=this;e&&(this.targetNodeLoc=e,this.getNodeObj({location:e,callback:function(e,o){t.targetNode=e[o]}})),this.row=this.targetNode.CTS.length,this.col=this.targetNode.CTS[0].length},tableSet:function(e){var t=this.targetNode.CTS.length,o=this.targetNode.CTS[0].length,n=Math.abs(this.row-t),c=Math.abs(this.col-o);if(this.col!=o)if(e&&Z.emit("add-history",{loc:this.targetNodeLoc,prop:"COL",before:o,after:this.col}),this.col>o){var i,s=Object(ue["a"])(this.targetNode.CTS);try{for(s.s();!(i=s.n()).done;)for(var l=i.value,r=0;r<c;r++)l.push("")}catch(O){s.e(O)}finally{s.f()}}else{var a,d=Object(ue["a"])(this.targetNode.CTS);try{for(d.s();!(a=d.n()).done;)for(var u=a.value,b=0;b<c;b++)u.pop()}catch(O){d.e(O)}finally{d.f()}}if(this.row!=t)if(e&&Z.emit("add-history",{loc:this.targetNodeLoc.loc,prop:"ROW",before:t,after:this.row}),this.row>t){for(var f=[],h=0;h<this.col;h++)f.push("");for(var p=0;p<n;p++)this.targetNode.CTS.push([].concat(f))}else for(var j=0;j<n;j++)this.targetNode.CTS.pop()}},watch:{disabled:function(e){e?(this.targetNode=null,this.targetNodeLoc=[],removeEventListener("keydown",this.eventListen)):addEventListener("keydown",this.eventListen)},row:function(e){var t=this;e<1?this.timeout=setTimeout((function(){t.row=1}),1e3):clearTimeout(this.timeout)},col:function(e){var t=this;e<1?this.timeout=setTimeout((function(){t.col=1}),1e3):clearTimeout(this.timeout)}}};o("15cf");const rc=V()(lc,[["render",sc],["__scopeId","data-v-75915245"]]);var ac=rc,dc=function(e){return Object(n["q"])("data-v-5fab3036"),e=e(),Object(n["p"])(),e},uc={class:"history fixed-component"},bc=dc((function(){return Object(n["g"])("i",{class:"material-icons"},"undo",-1)})),fc=[bc],hc=dc((function(){return Object(n["g"])("i",{class:"material-icons"},"redo",-1)})),pc=[hc],jc=dc((function(){return Object(n["g"])("i",{class:"material-icons"},"menu",-1)})),Oc=[jc];function vc(e,t,o,c,i,s){var l=Object(n["u"])("history-view"),r=Object(n["u"])("drawer");return Object(n["o"])(),Object(n["f"])(n["a"],null,[Object(n["j"])(n["b"],{name:"slide"},{default:Object(n["A"])((function(){return[Object(n["B"])(Object(n["g"])("div",uc,[Object(n["g"])("div",{class:Object(n["m"])(["btn btn-shallow",{disabled:i.historyIndex==s.note.HT.length-1}]),onClick:t[0]||(t[0]=function(e){return s.doit("undo")})},fc,2),Object(n["g"])("div",{class:Object(n["m"])(["btn btn-shallow",{disabled:i.historyIndex<0}]),onClick:t[1]||(t[1]=function(e){return s.doit("redo")})},pc,2),Object(n["g"])("div",{class:Object(n["m"])(["btn btn-shallow",{disabled:!s.note.HT.length}]),onClick:t[2]||(t[2]=function(e){return i.drawerDisabled=!1})},Oc,2)],512),[[n["y"],!o.disabled]])]})),_:1}),Object(n["j"])(r,{title:"编辑历史",disabled:i.drawerDisabled,onCloseDrawer:t[3]||(t[3]=function(e){return i.drawerDisabled=!0})},{default:Object(n["A"])((function(){return[Object(n["j"])(l,{list:s.note.HT,index:i.historyIndex},null,8,["list","index"])]})),_:1},8,["disabled"])],64)}var gc=function(e){return Object(n["q"])("data-v-45d2a3a0"),e=e(),Object(n["p"])(),e},mc=gc((function(){return Object(n["g"])("span",{class:"history-prop"},"位置：",-1)})),Tc={class:"loc"},yc=gc((function(){return Object(n["g"])("span",{class:"history-prop"},"属性：",-1)})),Cc={class:"prop"},wc=gc((function(){return Object(n["g"])("span",{class:"history-prop"},"改前：",-1)})),Nc=["title"],kc=gc((function(){return Object(n["g"])("span",{class:"history-prop"},"改后：",-1)})),xc=["title"],Lc=["data-index"];function Mc(e,t,o,c,i,s){return Object(n["o"])(!0),Object(n["f"])(n["a"],null,Object(n["s"])(o.list,(function(e,o){return Object(n["o"])(),Object(n["f"])("div",{class:"history-block",key:e.id,ref_for:!0,ref:"historyBlock"},[Object(n["g"])("div",null,[mc,Object(n["g"])("span",Tc,Object(n["w"])(e.loc),1)]),Object(n["g"])("div",null,[yc,Object(n["g"])("span",Cc,Object(n["w"])(i.propsDict[e.prop]),1)]),Object(n["B"])(Object(n["g"])("div",null,[wc,Object(n["g"])("span",{class:"text",title:e.before},Object(n["w"])(e.before),9,Nc)],512),[[n["y"],e.before]]),Object(n["B"])(Object(n["g"])("div",null,[kc,Object(n["g"])("span",{class:"text",title:e.after},Object(n["w"])(e.after),9,xc)],512),[[n["y"],e.after]]),Object(n["g"])("div",{class:"btn btn-shallow",onClick:t[0]||(t[0]=function(){return s.doSome&&s.doSome.apply(s,arguments)})},[Object(n["g"])("i",{class:"material-icons","data-index":o},"check",8,Lc)])])})),128)}var Sc={props:["list","index"],data:function(){return{propsDict:{CT:"内容",CL:"颜色",SUM:"题目",ROW:"行数",COL:"列数",IST:"插入",DEL:"删除"}}},methods:{doSome:function(e){var t=e.target,o=t.dataset["index"],n=this.$parent.$parent;n.doSome(o)}},watch:{index:function(e,t){var o=this.$el.parentNode,n=o.children[e],c=o.children[t];e>-1&&n.classList.add("selected"),t>-1&&c.classList.remove("selected")}}};o("9fa6");const _c=V()(Sc,[["render",Mc],["__scopeId","data-v-45d2a3a0"]]);var Ic=_c,Ac={data:function(){return{drawerDisabled:!0,historyIndex:-1}},components:{Drawer:to,HistoryView:Ic},props:["disabled"],inject:["note","selectedNode"],mixins:[z,Q,X],methods:{doit:function(e){var t="undo"==e?++this.historyIndex:this.historyIndex--,o=this.note.HT[t],n="undo"==e?"before":"after";switch(o.prop){case"CT":case"CL":case"SUM":this.getNodeObj({location:o.loc,callback:function(e,t){var c=e[t];c[o.prop]=o[n]}});break;case"ROW":case"COL":Z.emit("table-edit",{historyObj:o,resultValue:n});break;case"IST":var c=o.loc,i=this.deleteNode(c);o.prop="DEL",o.loc[o.loc.length-1]-=1,o.nodeObj=i;break;case"DEL":var s=o.nodeObj,l=o.loc;this.insertNode(s,l),o.prop="IST",o.loc[o.loc.length-1]+=1;break}},doSome:function(e){var t,o=e-this.historyIndex,n=Math.abs(o);if(o>0)t="undo";else{if(!(o<0))return;t="redo"}for(var c=0;c<n;c++)this.doit(t)}},mounted:function(){var e=this;addEventListener("keydown",(function(t){var o=t.altKey,n=t.key;o&&"z"==n&&e.doit("undo")})),addEventListener("keydown",(function(t){var o=t.altKey,n=t.key;o&&"y"==n&&e.doit("redo")})),Z.on("add-history",(function(t){var o=e.note.HT;if(20==o.length&&o.pop(),e.historyIndex<0)o.unshift(t);else{var n=e.historyIndex+1;o.splice(0,n),o.unshift(t),e.historyIndex=-1}})),Z.on("clear-history",(function(){e.historyIndex=-1}))}};o("c5a9");const Dc=V()(Ac,[["render",vc],["__scopeId","data-v-5fab3036"]]);var Fc=Dc,Bc={data:function(){return{textfieldGroupDisabled:!0,colorsDisabled:!0,tableSetterDisabled:!0,historyDisabled:!1}},components:{TextfieldGroupFixed:Un,Colors:zn,TableSetter:ac,History:Fc},methods:{open:function(e){this.closeAll(),this[e+"Disabled"]=!1},close:function(e){this[e+"Disabled"]=!0,this.historyDisabled=!1},closeAll:function(){this.colorsDisabled=!0,this.textfieldGroupDisabled=!0,this.tableSetterDisabled=!0,this.historyDisabled=!0}},mounted:function(){var e=this;Z.on("fixedComponents-open",this.open),Z.on("textfield-open",(function(){e.open("textfieldGroup")})),Z.on("fixedComponents-close",(function(){e.closeAll(),e.historyDisabled=!1}))}};o("4a16");const $c=V()(Bc,[["render",pn],["__scopeId","data-v-ab5781fc"]]);var Ec=$c,Uc={class:"msgbar-outer"};function Hc(e,t,o,c,i,s){return Object(n["o"])(),Object(n["e"])(n["b"],{name:"slide"},{default:Object(n["A"])((function(){return[Object(n["B"])(Object(n["g"])("div",Uc,[Object(n["g"])("div",{class:Object(n["m"])(["msgbar",{active:i.active}]),onClick:t[0]||(t[0]=function(){return s.close&&s.close.apply(s,arguments)})},Object(n["w"])(i.msg),3)],512),[[n["y"],i.active]])]})),_:1})}var Vc={data:function(){return{active:!1,msg:""}},methods:{close:function(){this.active=!1}},mounted:function(){var e=this;Z.on("show-msg",(function(t){e.msg=t,e.active=!0}))},watch:{active:function(e){var t=this;e&&setTimeout((function(){t.close()}),3e3)}}};o("e8e8");const Rc=V()(Vc,[["render",Hc]]);var Gc=Rc,qc={NM:"Example",HT:[],CTS:[{NT:"h",CT:"这是一个大标题",CL:"#333"},{NT:"hr"},{NT:"p",CT:"这是一个段落",CL:"#333"},{NT:"p",CT:"内联样式实例（均使用英文符号）：##粗体## ``代码`` __下划线__ //斜体// --删除-- ::淡化::",CL:"#333"},{NT:"link",CT:"一个链接",HF:"https://www.bing.com",CL:"#333"},{NT:"floor",CTS:[{NT:"h",CT:"这是层次中的大标题",CL:"#333"},{NT:"p",CT:"这是一个段落",CL:"#333"},{NT:"floor",CTS:[{NT:"h",CT:"这是层次中的大标题",CL:"#333"},{NT:"p",CT:"这是一个段落",CL:"#333"}]}]},{NT:"list",OL:!0,CTS:[{NT:"li",CT:"这是一个列表项",CL:"#333"},{NT:"li",CT:"这是一个列表项",CL:"#333"},{NT:"list",OL:!1,CTS:[{NT:"li",CT:"嵌套列表内的列表项",CL:"#333"},{NT:"li",CT:"嵌套列表内的列表项",CL:"#333"}]}]},{NT:"table",CTS:[["表格项","表格项","表格项","表格项"],["表格项","表格项","表格项","表格项"]]},{NT:"details",SUM:"这是一个详情块",CTS:[{CT:"这是一个段落",CL:"#333"},{CT:"这是一个段落",CL:"#333"}]},{NT:"code",LG:"javascript",CT:"console.log('Hello World')\nalert('Hello World')"}]},Kc={name:"App",components:{Anchors:co,Note:Jt,Uploader:hn,ControlBalls:go,ToolBar:ce,Msgbar:Gc,FixedComponents:Ec},data:function(){return{windowDisabled:!1,note:qc,selectedNode:{loc:null,obj:null,vnode:null,type:null},isDarkMode:!1,isTouchMode:!1,isFullscreen:!1}},provide:function(){var e=this;return{note:this.note,selectedNode:this.selectedNode,isTouchMode:Object(n["c"])((function(){return e.isTouchMode}))}},mounted:function(){this.$nextTick((function(){var e=function(){var e,t=document.querySelector("#meta-viewport");window&&(e=window.outerHeight);var o="width=device-width,height=".concat(e,",initial-scale=1.0");t.setAttribute("content",o)};e(),addEventListener("orientationchange",(function(){e()}))}))}};o("815b");const Wc=V()(Kc,[["render",c]]);var Jc=Wc,Pc=(o("2c43"),o("5143"),o("8f09"),o("38b9"),o("afd3"),o("86be"),o("61fd"),o("8d2a"),o("cde1"),o("584d"),o("9483"));Object(Pc["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var zc=Object(n["d"])(Jc);zc.use(gt["a"]),zc.config.unwrapInjectedRef=!0,zc.mount("#app")},"584d":function(e,t,o){},"604f":function(e,t,o){"use strict";o("7797")},"61fd":function(e,t,o){},6266:function(e,t,o){},6377:function(e,t,o){},"6d2d":function(e,t,o){},"73cc":function(e,t,o){},7797:function(e,t,o){},"815b":function(e,t,o){"use strict";o("3883")},"83d0":function(e,t,o){"use strict";o("73cc")},"85ea":function(e,t,o){"use strict";o("4e33")},"86be":function(e,t,o){},8897:function(e,t,o){"use strict";o("ad76")},"8a36":function(e,t,o){"use strict";o("4e36")},"8c71":function(e,t,o){},"8d2a":function(e,t,o){},"8f09":function(e,t,o){},"9fa6":function(e,t,o){"use strict";o("39de")},a55b:function(e,t,o){},ad76:function(e,t,o){},aee9:function(e,t,o){"use strict";o("6266")},afd3:function(e,t,o){},bde3:function(e,t,o){"use strict";o("e4e5")},c436:function(e,t,o){"use strict";o("d6c2")},c5a9:function(e,t,o){"use strict";o("475b")},c8ce:function(e,t,o){},cde1:function(e,t,o){},cee2:function(e,t,o){},d6c2:function(e,t,o){},d7b3:function(e,t,o){"use strict";o("e74d")},da3e:function(e,t,o){},e4e5:function(e,t,o){},e74d:function(e,t,o){},e8e8:function(e,t,o){"use strict";o("a55b")},ecff:function(e,t,o){"use strict";o("2683")},fec1:function(e,t,o){"use strict";o("c8ce")}});
//# sourceMappingURL=app.1b8f11a2.js.map